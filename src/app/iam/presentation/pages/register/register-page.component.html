<section class="register-page">
  <div class="register-card">
    <button class="register-card__back" type="button" (click)="onBack()">
      <span aria-hidden="true">&larr;</span>
      <span>{{ 'register.back' | translate }}</span>
    </button>

    <header class="register-card__header">
      <h1 class="register-card__brand">{{ 'app.title' | translate }}</h1>
      <h2 class="register-card__title">{{ 'register.headline' | translate }}</h2>
      <p class="register-card__subtitle">{{ 'register.subtitle' | translate }}</p>
    </header>

    <form class="register-form" (ngSubmit)="onSubmit()" [formGroup]="registerForm" autocomplete="off">
      <div class="register-form__field">
        <label for="name">{{ 'register.name' | translate }}</label>
        <input id="name" type="text" formControlName="name" autocomplete="name" />
        <div *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched" class="register-form__error">
          {{ 'register.errors.name' | translate }}
        </div>
      </div>

      <div class="register-form__field">
        <label for="email">{{ 'register.email' | translate }}</label>
        <input id="email" type="email" formControlName="email" autocomplete="email" />
        <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="register-form__error">
          {{ 'register.errors.email' | translate }}
        </div>
      </div>

      <div class="register-form__field">
        <label for="password">{{ 'register.password' | translate }}</label>
        <div class="register-form__password">
          <input
            [type]="hidePassword ? 'password' : 'text'"
            id="password"
            formControlName="password"
            autocomplete="new-password"
          />
          <button
            class="register-form__password-toggle"
            type="button"
            (click)="togglePasswordVisibility()"
          >
            {{ hidePassword ? ('register.showPassword' | translate) : ('register.hidePassword' | translate) }}
          </button>
        </div>
        <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="register-form__error">
          {{ 'register.errors.password' | translate }}
        </div>
      </div>

      <div class="register-form__field">
        <label for="confirmPassword">{{ 'register.confirmPassword' | translate }}</label>
        <div class="register-form__password">
          <input
            [type]="hideConfirmPassword ? 'password' : 'text'"
            id="confirmPassword"
            formControlName="confirmPassword"
            autocomplete="new-password"
          />
          <button
            class="register-form__password-toggle"
            type="button"
            (click)="toggleConfirmPasswordVisibility()"
          >
            {{ hideConfirmPassword ? ('register.showPassword' | translate) : ('register.hidePassword' | translate) }}
          </button>
        </div>
        <div *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched" class="register-form__error">
          {{ 'register.errors.confirmPassword' | translate }}
        </div>
      </div>

      <label class="register-form__terms">
        <input type="checkbox" formControlName="terms" />
        <span>{{ 'register.terms' | translate }}</span>
      </label>

      <button type="submit" class="register-form__submit" [disabled]="registerForm.invalid || isSubmitting">
        {{ 'register.createAccount' | translate }}
      </button>

      <p *ngIf="successMessage" class="register-form__feedback register-form__feedback--success">
        {{ successMessage }}
      </p>

      <p *ngIf="errorMessage" class="register-form__feedback register-form__feedback--error">
        {{ errorMessage }}
      </p>
    </form>

    <div class="register-card__switch">
      <span>{{ 'register.haveAccount' | translate }}</span>
      <a routerLink="/auth/login">{{ 'register.goToLogin' | translate }}</a>
    </div>
  </div>
</section>
