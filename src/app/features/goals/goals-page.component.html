@if (!isLoading && !loadError) {
  <section class="goals-page">
    <header class="goals-header">
      <button mat-icon-button type="button" (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
      </button>

      <div class="goals-header__info">
        <h1>{{ 'goals.title' | translate }}</h1>
        <p>
          {{ 'goals.subtitle' | translate }}
          <strong>{{ formatAmount(totals().remaining) }}</strong>
        </p>
      </div>

      <button mat-flat-button color="primary" type="button" (click)="openGoalDialog()">
        <mat-icon>add</mat-icon>
        {{ 'goals.add' | translate }}
      </button>
    </header>

    <section class="goals-summary card">
      <div class="goals-summary__item">
        <span class="label">{{ 'goals.summary.totalGoals' | translate }}</span>
        <strong>{{ totals().totalGoals }}</strong>
      </div>
      <div class="goals-summary__item">
        <span class="label">{{ 'goals.summary.totalTarget' | translate }}</span>
        <strong>{{ formatAmount(totals().totalTarget) }}</strong>
      </div>
      <div class="goals-summary__item">
        <span class="label">{{ 'goals.summary.totalSaved' | translate }}</span>
        <strong>{{ formatAmount(totals().totalSaved) }}</strong>
      </div>
    </section>

    <section class="goals-list card">
      @if (goals().length) {
        <ul class="goals-list__items">
          <li class="goal-card" *ngFor="let goal of goals()">
            <div class="goal-card__header">
              <h2>{{ goal.title }}</h2>
              <span class="goal-card__progress">{{ progress(goal) }}%</span>
            </div>
            <p class="goal-card__meta">
              {{ formatAmount(goal.savedAmount) }} /
              {{ formatAmount(goal.targetAmount) }}
              Â· {{ 'goals.labels.deadline' | translate }}: {{ formatDate(goal.deadline) }}
            </p>
            <div class="goal-card__bar">
              <div class="goal-card__bar-fill" [style.width.%]="progress(goal)"></div>
            </div>
            <p class="goal-card__notes" *ngIf="goal.notes">
              {{ goal.notes }}
            </p>
          </li>
        </ul>
      } @else {
        <p class="goals-list__empty">{{ 'goals.empty' | translate }}</p>
      }
    </section>
  </section>
} @else {
  <div class="goals-state">
    @if (isLoading) {
      <div class="goals-state__message">
        <mat-icon class="spinner-icon">autorenew</mat-icon>
        <p>{{ 'goals.loading' | translate }}</p>
      </div>
    } @else {
      <div class="goals-state__message">
        <p>{{ loadError | translate }}</p>
        <button mat-flat-button color="primary" type="button" (click)="reload()">
          {{ 'goals.tryAgain' | translate }}
        </button>
      </div>
    }
  </div>
}
