@if (isLoading) {
  <div class="profile-state">
    <mat-icon class="spinner-icon">autorenew</mat-icon>
    <p>{{ 'profile.loading' | translate }}</p>
  </div>
} @else if (loadError) {
  <div class="profile-state">
    <p>{{ loadError | translate }}</p>
    <button mat-flat-button color="primary" type="button" (click)="ngOnInit()">
      {{ 'profile.tryAgain' | translate }}
    </button>
  </div>
} @else {
  <section class="profile-page">
    <header class="profile-header card">
      <div class="profile-avatar">
        <img *ngIf="profile()?.avatar; else placeholder" [src]="profile()?.avatar" alt="avatar" />
        <ng-template #placeholder>
          <mat-icon>person</mat-icon>
        </ng-template>
      </div>
      <h1>{{ user()?.name || ('profile.anonymous' | translate) }}</h1>
      <p class="profile-email">{{ user()?.email }}</p>
      <button mat-stroked-button color="primary" type="button">
        {{ 'profile.actions.changeAvatar' | translate }}
      </button>
    </header>

    <section class="profile-info card">
      <div class="profile-row">
        <span class="profile-row__label">{{ 'profile.labels.name' | translate }}</span>
        <span class="profile-row__value">{{ user()?.name }}</span>
        <button mat-button type="button">{{ 'profile.actions.changeName' | translate }}</button>
      </div>

      <div class="profile-row">
        <span class="profile-row__label">{{ 'profile.labels.email' | translate }}</span>
        <span class="profile-row__value">{{ user()?.email }}</span>
        <button mat-button type="button">{{ 'profile.actions.changeEmail' | translate }}</button>
      </div>

      <div class="profile-row">
        <span class="profile-row__label">{{ 'profile.labels.password' | translate }}</span>
        <span class="profile-row__value">••••••••</span>
        <button mat-button type="button">{{ 'profile.actions.changePassword' | translate }}</button>
      </div>

      <div class="profile-row">
        <span class="profile-row__label">{{ 'profile.labels.currency' | translate }}</span>
        <span class="profile-row__value">{{ profile()?.currency || 'PEN' }}</span>
      </div>
    </section>

    <section class="profile-actions card">
      <button mat-flat-button color="primary" type="button">
        {{ 'profile.actions.update' | translate }}
      </button>
      <button mat-stroked-button color="warn" type="button">
        {{ 'profile.actions.delete' | translate }}
      </button>
      <button mat-flat-button color="warn" type="button" class="logout-button" (click)="handleLogout()">
        <mat-icon>logout</mat-icon>
        {{ 'profile.actions.logout' | translate }}
      </button>
    </section>
  </section>
}
